---
phase: 01-foundation-auth
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - app/login/page.tsx
  - app/register/page.tsx
  - app/dashboard/page.tsx
  - app/layout.tsx
  - app/globals.css
autonomous: true

must_haves:
  truths:
    - "User sees login screen on first visit"
    - "User sees registration screen when creating account"
    - "User can submit login form and authenticate"
    - "User can submit registration form and create account"
    - "User sees dashboard after successful login"
    - "UI uses all-black theme"
    - "Interface is clean and minimal"
  artifacts:
    - path: "app/login/page.tsx"
      provides: "Login form UI"
      exports: ["default"]
    - path: "app/register/page.tsx"
      provides: "Registration form UI"
      exports: ["default"]
    - path: "app/dashboard/page.tsx"
      provides: "Protected dashboard UI"
      exports: ["default"]
    - path: "app/layout.tsx"
      provides: "Root layout with theme"
      exports: ["default"]
    - path: "app/globals.css"
      provides: "All-black theme styles"
      contains: "background-color: #000"
  key_links:
    - from: "app/login/page.tsx"
      to: "/api/auth/login"
      via: "fetch POST on form submit"
      pattern: "fetch.*api/auth/login"
    - from: "app/register/page.tsx"
      to: "/api/auth/register"
      via: "fetch POST on form submit"
      pattern: "fetch.*api/auth/register"
    - from: "app/dashboard/page.tsx"
      to: "middleware.ts"
      via: "route protection"
      pattern: "protected by middleware"
---

<objective>
Create login, registration, and dashboard UIs with all-black theme and minimal design.

Purpose: Provide user-facing interfaces for authentication and protected dashboard access.
Output: Complete authentication flow from UI perspective - users can visually interact with the auth system.
</objective>

<execution_context>
@D:\.claude\get-shit-done\workflows\execute-plan.md
@D:\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@D:\Capstone\.planning\PROJECT.md
@D:\Capstone\.planning\ROADMAP.md
@D:\Capstone\.planning\STATE.md
@D:\Capstone\.planning\phases\01-foundation-auth\01-01-SUMMARY.md

Plan 01 created backend auth infrastructure. This plan builds the frontend.

Design requirements from STATE.md:
- All-black theme (#000 background)
- Minimal, clean interface
- Simple forms, no complexity

This is a Next.js App Router project. Use React Server Components where possible, Client Components only when needed (forms with state).
</context>

<tasks>

<task type="auto">
  <name>Task 1: Root Layout and Global Styles</name>
  <files>
    app/layout.tsx
    app/globals.css
    package.json
  </files>
  <action>
Set up Next.js root layout with all-black theme.

**app/layout.tsx:**
- Create root layout component
- Set HTML lang="en"
- Include metadata: title "Academic Voice Assistant", description "Voice-based academic information access"
- Apply all-black body styling
- Include globals.css

**app/globals.css:**
- Reset styles: margin 0, padding 0, box-sizing border-box
- All-black theme:
  - body background: #000 (pure black)
  - Default text color: #fff (white for readability)
  - Font: system-ui, -apple-system, sans-serif
- Input/button base styles:
  - Inputs: white text on dark gray background (#1a1a1a), white border
  - Buttons: white background, black text, hover state (#e0e0e0)
  - Focus states: white outline
- Minimal spacing, clean lines

**package.json:**
- Initialize Next.js project if not exists: `npm init -y`
- Install Next.js: `npm install next@latest react@latest react-dom@latest`
- Add scripts: `"dev": "next dev"`, `"build": "next build"`, `"start": "next start"`

Use Tailwind CSS is OPTIONAL. Plain CSS in globals.css is sufficient for minimal UI.
  </action>
  <verify>
Run `npm run dev` and visit http://localhost:3000

Should see black background (not white). Check browser DevTools computed styles: body background-color should be rgb(0, 0, 0).
  </verify>
  <done>
Root layout configured with all-black theme. Global styles applied. Next.js project initialized with dev server working.
  </done>
</task>

<task type="auto">
  <name>Task 2: Login and Registration Pages</name>
  <files>
    app/login/page.tsx
    app/register/page.tsx
  </files>
  <action>
Create login and registration form UIs.

**app/login/page.tsx:**
- Client Component ("use client" directive - needs form state)
- Form with email and password inputs
- Submit button
- Link to /register ("Don't have an account? Register")
- On submit:
  - Prevent default
  - Fetch POST to /api/auth/login with {email, password}
  - On 200: redirect to /dashboard using `window.location.href = '/dashboard'`
  - On error: display error message below form
- Minimal styling: centered form, white text on black, simple layout

**app/register/page.tsx:**
- Client Component ("use client" directive)
- Form with email and password inputs
- Submit button
- Link to /login ("Already have an account? Login")
- On submit:
  - Prevent default
  - Fetch POST to /api/auth/register with {email, password}
  - On 201: redirect to /login with success message (or auto-login then redirect to /dashboard)
  - On error: display error message below form
- Same minimal styling as login

Email input should have placeholder "e.g., 2021001@college.edu" to hint at roll number format.

Password input should be type="password".

Error states: red text (#ff4444) for visibility on black background.

Use React useState for form state and error messages.
  </action>
  <verify>
Visit http://localhost:3000/login and http://localhost:3000/register

Forms should:
- Render with all-black background, white text
- Show email and password inputs
- Have working submit buttons
- Display links to switch between login/register

Try submitting empty form - should call API (check Network tab in DevTools).
  </verify>
  <done>
Login page allows user to authenticate. Registration page allows user to create account. Both use minimal all-black theme. Forms connected to auth API routes.
  </done>
</task>

<task type="auto">
  <name>Task 3: Protected Dashboard Page</name>
  <files>
    app/dashboard/page.tsx
    app/page.tsx
  </files>
  <action>
Create protected dashboard and redirect root to login.

**app/dashboard/page.tsx:**
- Server Component (default - no "use client" needed)
- Display: "Welcome to your dashboard" heading
- Show user email (extract from cookie JWT if possible, or just show placeholder for now)
- Logout button (form with POST to /api/auth/logout, then redirect to /login)
- Minimal design: centered content, white text on black
- Note: This is a placeholder dashboard. Phase 2 will add microphone button here.

**app/page.tsx:**
- Root page at "/"
- Server Component
- Immediately redirect to /login using `redirect('/login')` from next/navigation
- This ensures first visit goes to login (UI-01 requirement)

For logout: Since Server Components can't have onClick handlers, create a simple form with a submit button that POSTs to /api/auth/logout, then use redirect after logout success. Or use Client Component for logout button.
  </action>
  <verify>
Run dev server:
1. Visit http://localhost:3000 → should redirect to /login
2. Register account and login
3. Should redirect to http://localhost:3000/dashboard
4. Dashboard should display welcome message
5. Logout button should work (click → redirect to /login)
6. After logout, trying to visit /dashboard should redirect back to /login (middleware protection)
  </verify>
  <done>
Protected dashboard page created. Root page redirects to login. Users land on login screen on first visit. Dashboard accessible only when authenticated.
  </done>
</task>

</tasks>

<verification>
Complete UI flow walkthrough:

1. **First visit (UI-01):**
   - Visit http://localhost:3000
   - Should redirect to /login
   - Black background, white text, minimal login form visible

2. **Registration (UI-02, AUTH-01):**
   - Click "Register" link from login page
   - See registration form (black theme)
   - Enter email (e.g., "2021001@college.edu") and password (min 8 chars)
   - Submit → should create account and redirect

3. **Login (AUTH-03):**
   - Enter credentials on login page
   - Submit → should authenticate and redirect to /dashboard

4. **Session persistence (AUTH-06):**
   - Logged in to dashboard
   - Refresh page (F5) → should stay on dashboard (not redirected to login)
   - Close browser, reopen, visit /dashboard → should still be logged in if within 7 days

5. **Route protection (AUTH-07):**
   - Logout from dashboard
   - Try visiting /dashboard directly → middleware redirects to /login

6. **Theme (all-black):**
   - All pages should have pure black (#000) background
   - Text should be white (#fff) for readability
   - Forms and buttons should follow minimal design
</verification>

<success_criteria>
- User sees login screen on first visit (UI-01)
- User sees registration screen when navigating to /register (UI-02)
- Login and registration forms submit to API routes and handle responses
- Dashboard displays after successful login
- All pages use all-black theme with minimal, clean design
- Logout functionality works
- Complete auth flow functional from user perspective
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-auth/01-02-SUMMARY.md`
</output>
